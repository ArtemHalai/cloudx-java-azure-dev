<!doctype html>
<html lang="en">

<head lang="en" th:replace="~{fragments/head :: head}"></head>

<body>
<div lang="en" th:replace="~{fragments/header :: header}"></div>
<div
		class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
	<h1 class="display-4">Select a Product</h1>
	<div class="alert alert-danger" role="alert" th:if="${error}">
		<span th:text="${error}"></span>
	</div>
	<div class="alert alert-secondary text-left" style="white-space: pre-wrap; font-size: 0.9em;"
		 th:if="${stacktrace}">
		<code style="padding-left: 0; display: block;" th:text="${stacktrace}"></code>
	</div>
	<table class="table">
		<div th:if="${products} != null">
			<tr th:each="product, iStat : ${products}">
				<td style="text-align: center !important;">
					<div style="text-align: center;"><img class="thumbnail" th:src="@{${product.photoURL}}"/></div>
					<div style="margin-bottom: 20px;">
						<span style="font-weight: bold;" th:text="${product.name}"></span>
					</div>
					<div style="margin-bottom: 20px;">
						<a style="font-weight: bold; text-decoration: none; color: black;"
						   th:onclick="'updatecart(\'' + ${product.id} + '\');'">
							<button class="btn btn-outline-primary" type="submit">Add
								to cart
							</button>
						</a>
					</div>
				</td>
			</tr>
		</div>
	</table>
</div>
<form action="updatecart" id="addProduct" method="post">
	<input th:if="${_csrf}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"
		   type="hidden"/> <input id="productId" name="productId"
											  type="hidden" value="">
</form>
<div lang="en" th:replace="~{fragments/footer :: footer}"></div>
<div lang="en" th:replace="~{fragments/disclaimer :: disclaimer}"></div>
<script language="javascript">
	function updatecart(productId) {
		document.getElementById('productId').value = productId;
		document.getElementById('addProduct').submit();
	}
</script>
</body>

</html>